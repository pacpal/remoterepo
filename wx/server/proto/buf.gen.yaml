version: v2

managed:
  enabled: true
  # 自动处理 go_package 选项（可选，但强烈推荐，避免手动写 option go_package）
  disable:
    - file_option: go_package
     

plugins:
  - local: protoc-gen-go
    out: gen/go
    opt: paths=source_relative

  - local: protoc-gen-go-grpc
    out: gen/go
    opt: paths=source_relative

  - local: protoc-gen-grpc-gateway
    out: gen/go
    opt:
      - paths=source_relative
      - logtostderr=true

  # 可选：同时生成 OpenAPI/Swagger
  # - remote: buf.build/grpc-ecosystem/plugins/openapiv2:latest
  #   out: .
  #   opt: allow_merge=true,merge_file_name=trip